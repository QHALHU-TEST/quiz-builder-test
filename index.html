<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Quiz Builder — PWA (✅/❎)</title>

<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0a2b47">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

<meta http-equiv="Content-Security-Policy"
      content="default-src 'self';
               script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net;
               style-src 'self' 'unsafe-inline';
               img-src 'self' data: blob:;
               connect-src 'self' https://api.openai.com;
               worker-src 'self' blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net;
               object-src 'none';
               base-uri 'self';
               form-action 'self'">
<meta name="referrer" content="no-referrer">
<link rel="icon" href="data:,">

<style>
  :root{
    --bg:#071b2b; --bg2:#0b2a44; --panel:#0d2f4f; --panel2:#0a2741;
    --text:#e9f4ff; --muted:#b9d4ec; --border:#13476f;
    --brand:#5cc8ff; --accent:#7aa8ff; --chip:#0c2540;
    --ok:#1ea96b; --err:#d54b4b;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
    color:var(--text);
    background: radial-gradient(1200px 600px at 50% -200px, var(--bg2), var(--bg) 60%);
    min-height:100vh;
  }

  .banner{position:sticky;top:0;padding:10px 14px;background:#06314d;color:#ccecff;border-bottom:1px solid #0e4167;z-index:1000}
  .mheader{position:sticky; top:44px; display:flex; align-items:center; gap:10px; padding:10px 14px; background:#08253f; border-bottom:1px solid var(--border); z-index:1000;}
  .hamburger{appearance:none;border:1px solid var(--border); background:#0a2239; color:var(--text); border-radius:10px; padding:8px 12px; font-size:16px; cursor:pointer}
  .app{display:grid; grid-template-columns: 1fr; min-height:calc(100vh - 88px)}
  .layout{display:grid; grid-template-columns: 1fr; min-height:100%}
  .sidebar{
    position:fixed; inset:88px auto 0 0; width:min(84vw,360px);
    background:linear-gradient(180deg,var(--panel),var(--panel2));
    border-right:1px solid var(--border); padding:14px; overflow:auto; transform:translateX(-100%);
    transition:transform .25s ease; z-index:1200; box-shadow:0 0 0 9999px rgba(0,0,0,.35);
  }
  body.drawer-open .sidebar{ transform:translateX(0) }
  @media (min-width: 1024px){
    .mheader{display:none}
    .app{grid-template-columns:300px 1fr; min-height:calc(100vh - 44px)}
    .layout{grid-template-columns:300px 1fr}
    .sidebar{position:relative; inset:auto; width:100%; transform:none; box-shadow:none}
  }

  .main{overflow:auto; padding:18px}
  .btn{background:#11385b;color:var(--text);border:1px solid var(--border);padding:10px 14px;border-radius:12px;cursor:pointer}
  .btn:hover{background:#134266}
  .btn.primary{background:linear-gradient(180deg,var(--brand),var(--accent));border-color:transparent;color:#06223a}
  .btn.danger{color:#ffb6b6;border-color:#6b1e1e;background:#2b0f0f}
  .pill{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border:1px solid var(--border);border-radius:999px;background:var(--chip);font-size:12px}
  .card{border:1px solid var(--border);background:linear-gradient(180deg,#0c2a47 0%, #081d31 100%);border-radius:16px;padding:16px;margin-bottom:14px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .tab{padding:8px 12px;border-radius:12px;border:1px solid var(--border);background:#0a2239;cursor:pointer;margin-right:6px}
  .tab.active{outline:2px solid #5cc8ff88}
  .hidden{display:none !important}
  textarea,input,select{width:100%;background:#0a2239;color:var(--text);border:1px solid var(--border);border-radius:12px;padding:10px;outline:none}
  .row{display:flex;gap:10px;align-items:center}
  .row.wrap{flex-wrap:wrap}
  .stack{display:flex;flex-direction:column;gap:8px}
  .grid2{display:grid;grid-template-columns:1fr;gap:12px}
  @media (min-width: 860px){ .grid2{grid-template-columns:1fr 1fr} }

  .options-row{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0}
  .options-row label{display:flex;align-items:center;gap:6px;font-size:14px;padding:4px 8px;border:1px solid var(--border);border-radius:999px;background:#0a2239}
  .options-row input[type="checkbox"]{margin:0;width:18px;height:18px}

  .opt{display:flex; align-items:flex-start; gap:12px; padding:12px; border:1px solid var(--border); border-radius:12px; margin:10px 0; background:#0a2239;}
  .opt input{flex:0 0 auto; width:22px; height:22px; margin-top:2px}
  .opt div,.opt span{flex:1 1 auto; min-width:0; word-break:break-word}
  .opt.correct{border-color:var(--ok); background:#0b2419}
  .opt.wrong{border-color:var(--err); background:#241013}

  .progress{height:10px;background:#0a2239;border:1px solid var(--border);border-radius:999px;overflow:hidden}
  .bar{height:100%;background:linear-gradient(90deg,var(--brand),var(--accent))}
  .question{font-weight:700;font-size:18px;margin-bottom:6px}
  .small{font-size:12px;color:var(--muted)}

  /* Drop zone (fixed) */
  .drop-wrap{display:grid;place-items:center;min-height:240px;border:2px dashed var(--border);border-radius:16px;background:#082039}
  .drop-wrap.drag{outline:3px solid #5cc8ffaa}
  .drop-area{display:flex;flex-direction:column;align-items:center;gap:10px;text-align:center;max-width:720px;padding:24px}

  .watermark-bottom{position:fixed;bottom:6px;left:50%;transform:translateX(-50%);font-size:12px;color:#9fc9ef;opacity:.7;pointer-events:none;z-index:2000;text-align:center}
  .watermark-top{font-size:10px;color:#b7d9f7;opacity:.8;margin-left:6px;white-space:nowrap}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.min.js"></script>
<script>if (window.pdfjsLib) { pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.worker.min.js"; }</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.3/dist/tesseract.min.js"></script>
</head>
<body>
<div class="banner" id="jsBanner">⚠️ JavaScript has not started yet…</div>
<!-- ... rest of body unchanged ... -->
<script src="app.js?v=ocr-ui-fix"></script>
</body>
</html>
